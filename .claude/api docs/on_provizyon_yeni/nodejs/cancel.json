

// Mağaza bilgileri
var merchant_id   = 'MAGAZA_NO';
var merchant_key  = 'XXXXXXXXXXX';
var merchant_salt = 'YYYYYYYYYYY';

// Kullanıcı bilgileri
var client_ip ='';

// İşlem bilgileri
var reference_no = 'AXXXXXXXXXXXXXXXX';
var merchant_oid = 'TESTPREAUTHXXX';
var client_lang  = 'tr';
var test_failed    = 0;
var auth_type = 'cancel';
var hashSTR = `${merchant_id}${user_ip}${merchant_oid}${reference_no}`;
console.log('HASH STR' + hashSTR);
    var paytr_token = hashSTR + merchant_salt;
    console.log('PAYTR TOKEN' + paytr_token);
    var token = crypto.createHmac('sha256', merchant_key).update(paytr_token).digest('base64');

console.log('TOKEN' + token);
    context = {
        auth_type,
        paytr_token,
        merchant_id,
        merchant_oid,
        reference_no,
        client_ip,
        client_lang,
        test_failed,
    };
 res.render('index');

});


  
var port = 3200;
app.listen(port, function () {
    console.log("Server is running. Port:" + port);
});